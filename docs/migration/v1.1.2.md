# Migration to v1.1.2

These are the steps to migrate from `v1.1.1` to `v1.1.2`.

## Add Publish Dry-Run to Verification Scripts

Add a publish dry-run check to your verification scripts. This verifies that your package can be published to crates.io without errors, using `--allow-dirty` to allow uncommitted changes.

### Update `.cargo/verify.sh`

Add the following after the "Formatting" section (after line 49):

```diff
 echo "Formatting..."
 run_cmd cargo fmt --all --quiet
 
+echo "Publish dry-run..."
+run_cmd cargo publish --dry-run --allow-dirty --quiet --workspace
+
 echo "All checks passed!"
```

### Update `.cargo/verify.ps1`

Add the following after the "Formatting" section (after line 92):

```diff
 Write-Host "Formatting..."
 Invoke-LoggedCommand "cargo" @("fmt", "--all", "--quiet")
 
+Write-Host "Publish dry-run..."
+Invoke-LoggedCommand "cargo" @("publish", "--dry-run", "--allow-dirty", "--quiet", "--workspace")
+
 Write-Host "All checks passed!"
```

## Why Add Publish Dry-Run?

This step catches common publishing issues before you push tags:

- **Missing or incorrect documentation** - Ensures all public items have docs
- **Dependency issues** - Validates all dependencies are available on crates.io
- **Metadata problems** - Checks authors, licenses, and other metadata
- **Allow-dirty flag** - Lets you run verification on uncommitted changes during development

## Update Template Version Marker

Update `.github/template-version.txt` to reflect the new version:

```diff
- reloaded-templates-rust:1.1.1
+ reloaded-templates-rust:1.1.2
```
